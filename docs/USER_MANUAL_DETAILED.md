# 싱가포르 뉴스 스크래퍼 상세 사용자 매뉴얼 v1.1.0

## 목차
1. [시스템 소개](#시스템-소개)
2. [시작하기](#시작하기)
3. [로그인 및 인증](#로그인-및-인증)
4. [대시보드 사용법](#대시보드-사용법)
5. [뉴스 스크래핑](#뉴스-스크래핑)
6. [스크랩 관리](#스크랩-관리)
7. [WhatsApp 전송](#whatsapp-전송)
8. [설정 관리](#설정-관리)
9. [사이트 관리](#사이트-관리)
10. [전송 이력](#전송-이력)
11. [사용자 관리](#사용자-관리)
12. [MFA 설정](#mfa-설정)
13. [API 사용법](#api-사용법)
14. [문제 해결](#문제-해결)
15. [자주 묻는 질문](#자주-묻는-질문)

---

## 시스템 소개

### 개요
싱가포르 뉴스 스크래퍼는 싱가포르의 주요 뉴스 사이트에서 최신 뉴스를 자동으로 수집하고, AI를 활용해 한국어로 요약한 후 WhatsApp으로 전송하는 통합 시스템입니다.

### 주요 기능 (v1.1.0 신규 기능 포함)
- 🌏 **자동 뉴스 수집**: 16개 싱가포르 뉴스 사이트에서 실시간 수집
- 🤖 **AI 요약**: Cohere AI와 Google Gemini를 활용한 고품질 한국어 요약
- 📱 **WhatsApp 전송**: Green API를 통한 자동 메시지 전송
- 📊 **스크래핑 방법 선택**: Traditional, AI, Hybrid AI 모드 지원
- 🔐 **보안 강화**: MFA(2단계 인증) 지원
- 📈 **성능 개선**: 하루 25개 AI 요약 지원 (기존 2개에서 증가)

### 시스템 구성
- **프론트엔드**: GitHub Pages (https://djyalu.github.io/singapore_news_github)
- **백엔드**: Vercel 서버리스 함수
- **자동화**: GitHub Actions (매일 오전 7:55 KST 실행)
- **AI 서비스**: Cohere AI (우선) + Google Gemini (백업)

---

## 시작하기

### 접속 방법
1. 웹 브라우저를 열고 다음 주소로 접속합니다:
   ```
   https://djyalu.github.io/singapore_news_github
   ```

2. 지원 브라우저:
   - Chrome (권장)
   - Firefox
   - Safari
   - Edge

### 첫 화면
로그인 화면이 표시되며, 다음 정보가 보입니다:
- 시스템 버전 (현재 v1.1.0)
- 주요 기능 아이콘
- 로그인 폼

---

## 로그인 및 인증

### 기본 로그인
1. **사용자 ID**: `admin`
2. **비밀번호**: `Admin@123`
3. "로그인" 버튼 클릭

### MFA (2단계 인증) - 선택사항
MFA가 활성화된 경우:
1. ID/비밀번호 입력 후 MFA 화면이 나타남
2. 인증 앱(Google Authenticator 등)에서 6자리 코드 확인
3. 코드 입력 후 "인증하기" 클릭

### 로그인 문제 해결
- **잘못된 자격 증명**: ID와 비밀번호 확인
- **MFA 코드 오류**: 시간 동기화 확인
- **세션 만료**: 다시 로그인

---

## 대시보드 사용법

### 메인 화면 구성
대시보드는 다음 섹션으로 구성됩니다:

#### 1. 상단 네비게이션
- **Dashboard**: 메인 화면
- **Settings**: 시스템 설정 (관리자 전용)
- **전송 이력**: WhatsApp 전송 기록
- **스크랩 관리**: 수집된 뉴스 관리
- **사용자 관리**: 사용자 계정 관리 (관리자 전용)
- **MFA 설정**: 2단계 인증 설정

#### 2. 현재 설정 표시
- 스크래핑 방법 (Traditional/AI/Hybrid AI)
- WhatsApp 채널 상태
- 실행 유형 설정
- AI 요약 사용 여부

#### 3. 스크래핑 제어 패널
실시간으로 뉴스 수집을 제어할 수 있는 버튼들:

##### 스크래핑 + WhatsApp 전송
- **용도**: 뉴스 수집과 동시에 WhatsApp 전송
- **소요 시간**: 약 7-10분
- **프로세스**:
  1. 설정된 사이트에서 뉴스 수집
  2. AI 요약 생성 (설정된 경우)
  3. WhatsApp으로 자동 전송

##### 스크래핑만 실행
- **용도**: WhatsApp 전송 없이 뉴스만 수집
- **소요 시간**: 약 5-7분
- **활용**: 테스트 또는 수동 확인 시

##### WhatsApp만 전송
- **용도**: 이미 수집된 뉴스를 WhatsApp으로 전송
- **소요 시간**: 약 1-2분
- **활용**: 전송 실패 시 재전송

#### 4. 최신 스크랩 결과
수집된 뉴스를 그룹별로 표시:
- **News**: 일반 뉴스
- **Economy**: 경제 뉴스
- **Tech**: 기술 뉴스
- **Lifestyle**: 라이프스타일
- **Sports**: 스포츠
- **Others**: 기타

각 기사는 다음 정보를 포함:
- 📰 제목 (클릭 시 원문 링크)
- 📝 AI 요약 (한국어)
- 🏢 출처 사이트
- 📅 발행일
- 🤖 요약 방법 (Cohere/Gemini/Fallback)

---

## 뉴스 스크래핑

### 스크래핑 방법 선택

#### 1. Traditional (전통적 방식)
- **특징**: HTML 파싱 기반
- **장점**: 빠른 속도, 안정적
- **단점**: 사이트 구조 변경에 취약
- **권장**: 기본적인 뉴스 수집 시

#### 2. AI (AI 분석 방식)
- **특징**: Gemini API로 콘텐츠 분석
- **장점**: 정확한 콘텐츠 추출
- **단점**: API 호출 제한 (분당 15회)
- **권장**: 고품질 콘텐츠 필요 시

#### 3. Hybrid AI (하이브리드 AI) - v1.1.0 신규
- **특징**: Traditional 수집 + AI 요약
- **장점**: 안정성과 품질의 균형
- **단점**: 처리 시간 증가
- **권장**: 최상의 결과를 원할 때

### 스크래핑 실행 방법

#### 자동 실행
- 매일 오전 7:55 (KST) 자동 실행
- GitHub Actions를 통해 예약 실행
- 실행 결과는 대시보드에서 확인

#### 수동 실행
1. 대시보드에서 원하는 버튼 클릭
2. 진행 상태 모니터링:
   - "스크래핑 중..." 메시지 표시
   - 실시간 진행률 표시
   - 완료 시 자동 새로고침

### AI 요약 기능 (v1.1.0 개선)

#### Cohere AI 우선 사용
- 고품질 한국어 요약 제공
- 하루 25개 기사까지 요약
- 월 750개 제한 (무료 플랜)

#### 자동 폴백 시스템
1. **1차 시도**: Cohere AI
2. **2차 시도**: Google Gemini
3. **3차 시도**: 기본 키워드 추출

#### AI 요약 예시
```
📰 제목: 싱가포르 MRT 새 노선 개통
내용: 싱가포르 교통부는 오늘 새로운 MRT 노선인 톰슨-이스트코스트 라인의 
3단계 구간을 개통했다. 이로써 총 13개 역이 추가되어 동부 지역 주민들의 
교통 편의성이 크게 향상될 전망이다.
```

---

## 스크랩 관리

### 스크랩 파일 조회
1. 상단 메뉴에서 "스크랩 관리" 클릭
2. 저장된 스크랩 파일 목록 표시

### 필터링 기능
#### 날짜 범위 선택
- 시작일과 종료일 선택
- 빠른 선택 버튼:
  - 오늘
  - 최근 7일
  - 최근 30일
  - 전체

#### 통계 정보
- 총 파일 수
- 총 기사 수
- 날짜 범위
- 사이트 수

### 스크랩 파일 작업
#### 개별 삭제
- 각 파일 옆 "삭제" 버튼 클릭
- 확인 메시지 후 삭제

#### 일괄 삭제
1. 삭제할 파일들 체크박스 선택
2. "선택 삭제" 버튼 클릭
3. 확인 후 일괄 삭제

#### 파일 다운로드
- "다운로드" 버튼으로 JSON 파일 저장
- 백업 또는 분석용으로 활용

---

## WhatsApp 전송

### 전송 설정
1. Settings 메뉴에서 WhatsApp 설정
2. 채널 ID 입력 (Green API에서 제공)
3. 저장 후 테스트 전송

### 메시지 형식
```
🗞️ 싱가포르 뉴스 요약
2025년 7월 25일 금요일

[News - 3개 기사]
──────────────────────

1️⃣ 제목...
📝 요약...

[Economy - 2개 기사]
──────────────────────

총 5개 기사를 요약했습니다.
```

### 전송 옵션
- **즉시 전송**: 스크래핑 직후 자동 전송
- **수동 전송**: "WhatsApp만 전송" 버튼 사용
- **재전송**: 전송 실패 시 재시도

---

## 설정 관리

### 기본 설정
#### 스크래핑 방법
- Traditional / AI / Hybrid AI 중 선택
- 변경 즉시 적용

#### 실행 유형
- **auto**: 자동 실행용 (GitHub Actions)
- **manual**: 수동 실행용 (대시보드)

#### AI 요약 설정
- Cohere AI 사용 여부
- 최대 요약 개수 (25개)
- 폴백 옵션 설정

### WhatsApp 설정
#### 채널 설정
- Primary Channel ID
- Test Channel ID (선택)
- 메시지 포맷 커스터마이징

#### Green API 설정
- Instance ID
- API Token
- 전송 간격 설정

### 알림 설정
#### 이메일 알림
- 스크래핑 완료 알림
- 오류 발생 알림
- 일일 요약 리포트

---

## 사이트 관리

### 뉴스 사이트 목록
현재 16개 사이트 지원:
1. **The Straits Times** - 주요 일간지
2. **Channel NewsAsia** - 방송 뉴스
3. **The Business Times** - 경제 전문
4. **Yahoo Singapore** - 포털 뉴스
5. **Mothership** - 온라인 미디어
6. 기타 11개 사이트

### 사이트 추가/수정
1. Settings > Sites 탭
2. 사이트 정보 입력:
   - 이름
   - URL
   - 그룹 (News/Economy/Tech 등)
   - 활성화 여부

### 사이트별 설정
- **우선순위**: High/Medium/Low
- **기사 수 제한**: 사이트별 최대 수집 개수
- **셀렉터**: HTML 요소 선택자 (고급)

---

## 전송 이력

### 이력 조회
1. "전송 이력" 메뉴 클릭
2. 날짜별 전송 기록 표시

### 이력 정보
- 전송 일시
- 전송된 기사 수
- 채널 정보
- 전송 상태 (성공/실패)
- 오류 메시지 (실패 시)

### 이력 필터링
- 날짜 범위 선택
- 상태별 필터 (성공/실패)
- 채널별 필터

---

## 사용자 관리

### 사용자 목록 (관리자 전용)
- 등록된 사용자 목록
- 역할 (Admin/User)
- 마지막 로그인
- MFA 상태

### 사용자 추가
1. "새 사용자" 버튼 클릭
2. 정보 입력:
   - 사용자 ID
   - 초기 비밀번호
   - 역할 선택
   - MFA 필수 여부

### 사용자 수정
- 비밀번호 재설정
- 역할 변경
- MFA 설정 변경
- 계정 활성화/비활성화

---

## MFA 설정

### MFA 활성화
1. "MFA 설정" 메뉴 클릭
2. "MFA 활성화" 버튼 클릭
3. QR 코드 표시
4. 인증 앱으로 스캔:
   - Google Authenticator
   - Microsoft Authenticator
   - Authy

### QR 코드 스캔
1. 인증 앱 열기
2. "+" 또는 "계정 추가" 선택
3. QR 코드 스캔
4. 6자리 코드 확인

### 백업 코드
- 10개의 일회용 백업 코드 생성
- 안전한 곳에 보관
- 휴대폰 분실 시 사용

### MFA 비활성화
1. 현재 MFA 코드 입력
2. "MFA 비활성화" 확인
3. 즉시 적용

---

## API 사용법

### API 엔드포인트
기본 URL: `https://singapore-news-github.vercel.app/api/`

### 주요 API
#### 1. 스크래핑 트리거
```bash
POST /api/trigger-scraping
Authorization: Bearer YOUR_TOKEN
```

#### 2. 스크래핑 상태 확인
```bash
GET /api/get-scraping-status
```

#### 3. 최신 스크랩 데이터
```bash
GET /api/get-latest-scraped
```

#### 4. WhatsApp 테스트
```bash
POST /api/test-whatsapp
Content-Type: application/json
{
  "message": "테스트 메시지"
}
```

### API 인증
- GitHub Personal Access Token 필요
- Vercel 환경변수에 설정
- Bearer 토큰 방식

---

## 문제 해결

### 일반적인 문제

#### 1. 로그인 실패
- **증상**: "잘못된 자격 증명" 오류
- **해결**: 
  - 대소문자 확인
  - 캐시 삭제 후 재시도
  - 브라우저 쿠키 확인

#### 2. 스크래핑 실패
- **증상**: 0개 기사 수집
- **해결**:
  - 스크래핑 방법 변경 (Traditional → Hybrid AI)
  - 사이트 상태 확인
  - API 한도 확인

#### 3. WhatsApp 전송 실패
- **증상**: "전송 실패" 메시지
- **해결**:
  - Green API 크레딧 확인
  - 채널 ID 확인
  - 네트워크 연결 확인

#### 4. AI 요약 실패
- **증상**: 기본 요약만 표시
- **해결**:
  - API 키 확인
  - 일일 한도 확인 (25개)
  - 월간 한도 확인 (750개)

### 고급 문제 해결

#### GitHub Actions 오류
1. Repository Settings 확인
2. Actions 탭에서 로그 확인
3. Secrets 설정 확인:
   - GOOGLE_GEMINI_API_KEY
   - COHERE_API_KEY

#### Vercel 배포 오류
1. Vercel 대시보드 접속
2. Function 로그 확인
3. 환경변수 확인:
   - GITHUB_TOKEN
   - WHATSAPP_API_KEY

#### 시간대 문제
- 모든 시간은 KST (한국 표준시) 기준
- UTC+9 시간대 자동 적용
- 브라우저 시간대와 무관

---

## 자주 묻는 질문

### Q1: 하루에 몇 개의 기사를 수집할 수 있나요?
**A**: 스크래핑 방법에 따라 다릅니다:
- Traditional: 제한 없음 (사이트 구조에 따라 변동)
- AI/Hybrid AI: 최대 25개 (v1.1.0부터)

### Q2: WhatsApp 전송이 안 될 때는?
**A**: 다음을 확인하세요:
1. Green API 크레딧 잔액
2. 올바른 채널 ID 입력
3. 인터넷 연결 상태
4. API 서비스 상태

### Q3: 새로운 뉴스 사이트를 추가할 수 있나요?
**A**: 네, 가능합니다:
1. Settings > Sites에서 추가
2. 또는 관리자에게 요청
3. RSS 피드가 있으면 더 쉽게 추가 가능

### Q4: 스크래핑 시간을 변경할 수 있나요?
**A**: GitHub Actions 설정 변경이 필요합니다:
1. `.github/workflows/scraper.yml` 편집
2. cron 표현식 수정
3. 한국 시간 기준으로 계산 (UTC+9)

### Q5: 모바일에서도 사용할 수 있나요?
**A**: 네, 반응형 디자인으로 모바일 지원:
- 스마트폰 브라우저에서 접속
- 터치 인터페이스 최적화
- 일부 기능은 PC 권장

### Q6: 데이터는 얼마나 보관되나요?
**A**: 자동 정리 정책:
- 스크랩 데이터: 30일
- WhatsApp 이력: 90일
- 수동 백업 권장

### Q7: API 한도를 초과하면?
**A**: 자동 폴백 시스템 작동:
1. Cohere AI → Google Gemini → 기본 요약
2. 다음날 자동 리셋
3. 필요시 유료 플랜 고려

### Q8: 여러 사용자가 동시에 사용할 수 있나요?
**A**: 네, 다중 사용자 지원:
- 역할 기반 접근 제어
- 동시 세션 지원
- 작업 충돌 방지 메커니즘

### Q9: 백업은 어떻게 하나요?
**A**: 여러 백업 옵션:
1. 스크랩 파일 다운로드
2. GitHub 저장소 자동 백업
3. 설정 내보내기 기능

### Q10: 시스템 업데이트는 어떻게 하나요?
**A**: 자동 업데이트:
- GitHub Pages 자동 배포
- Vercel 자동 배포
- 브라우저 새로고침으로 최신 버전 적용

---

## 추가 정보

### 시스템 요구사항
- **브라우저**: Chrome 90+, Firefox 88+, Safari 14+
- **네트워크**: 안정적인 인터넷 연결
- **화면**: 1024x768 이상 권장

### 보안 주의사항
- 공용 컴퓨터에서 로그아웃 필수
- 정기적인 비밀번호 변경
- MFA 사용 권장
- API 키 노출 주의

### 지원 및 문의
- GitHub Issues: 버그 리포트 및 기능 요청
- 관리자 연락처: 시스템 내 공지사항 참조
- 업데이트 알림: 대시보드 상단 배너

### 라이선스 및 저작권
- 오픈소스 프로젝트
- MIT 라이선스
- 뉴스 콘텐츠 저작권은 각 언론사 소유

---

## 버전 히스토리

### v1.1.0 (2025-07-25)
- ✨ Cohere AI 통합으로 고품질 한국어 요약
- 📈 AI 요약 한도 증가 (2→25개/일)
- 🚀 하이브리드 AI 스크래핑 모드 추가
- 🔧 콘텐츠 검증 기준 완화
- 🐛 시간대 버그 수정 (KST 적용)

### v1.0.4 (2025-07-20)
- 초기 안정화 버전
- 기본 스크래핑 기능
- WhatsApp 전송 기능
- 대시보드 구현

---

**마지막 업데이트**: 2025년 7월 25일
**문서 버전**: 1.1.0